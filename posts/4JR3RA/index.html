<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="https://fonts.lug.ustc.edu.cn/css?family=Lato:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha256-HtsXJanqjKTc8vVQjO4YMhiqFoXkfBsjBWcX91T1jr8=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/themes/blue/pace-theme-bounce.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous"></script>

<script class="next-config" data-name="main" type="application/json">{"hostname":"powerlzy.github.io","root":"/","images":"/images","scheme":"Pisces","darkmode":false,"version":"8.15.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":true,"style":"flat"},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta name="description" content="¶【TODO】OWASP API安全 top 10 2023变化解读  问题定义，【问题危害】，变化比较（变化原因），场景分析，【案例分析】, 缓解措施     2019 2023 变化     API1:2019 Broken Object Level Authorization API1:2023 Broken Object Level Authorization 水平越权   API2:20">
<meta property="og:type" content="article">
<meta property="og:title" content="流量反作弊（8）【Draft】OWASP-API安全top 10 2023年变化解读">
<meta property="og:url" content="https://powerlzy.github.io/posts/4JR3RA/index.html">
<meta property="og:site_name" content="PowerLZY&#39;s Blog">
<meta property="og:description" content="¶【TODO】OWASP API安全 top 10 2023变化解读  问题定义，【问题危害】，变化比较（变化原因），场景分析，【案例分析】, 缓解措施     2019 2023 变化     API1:2019 Broken Object Level Authorization API1:2023 Broken Object Level Authorization 水平越权   API2:20">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://lzy-picture.oss-cn-beijing.aliyuncs.com/img/202305041838031.png">
<meta property="article:published_time" content="2023-05-04T07:46:58.188Z">
<meta property="article:modified_time" content="2023-07-06T14:51:44.665Z">
<meta property="article:author" content="lzy">
<meta property="article:tag" content="工业落地">
<meta property="article:tag" content="业务安全">
<meta property="article:tag" content="API安全">
<meta property="article:tag" content="OWASP">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://lzy-picture.oss-cn-beijing.aliyuncs.com/img/202305041838031.png">


<link rel="canonical" href="https://powerlzy.github.io/posts/4JR3RA/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://powerlzy.github.io/posts/4JR3RA/","path":"posts/4JR3RA/","title":"流量反作弊（8）【Draft】OWASP-API安全top 10 2023年变化解读"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>流量反作弊（8）【Draft】OWASP-API安全top 10 2023年变化解读 | PowerLZY's Blog</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">PowerLZY's Blog</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">本博客主要用于记录个人学习笔记（测试阶段）</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text">【TODO】OWASP API安全 top 10 2023变化解读</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link"><span class="nav-text">OWASP API安全10大变化2023RC</span></a></li><li class="nav-item nav-level-3"><a class="nav-link"><span class="nav-text">一、API1:2023 破损的对象级别授权（BOLA）</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link"><span class="nav-text">1.1 定义</span></a></li><li class="nav-item nav-level-4"><a class="nav-link"><span class="nav-text">1.2 场景</span></a></li><li class="nav-item nav-level-4"><a class="nav-link"><span class="nav-text">1.3 缓解方式</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link"><span class="nav-text">二、API2:2023 破损的身份验证（Broken Authentication）</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link"><span class="nav-text">2.1 定义</span></a></li><li class="nav-item nav-level-4"><a class="nav-link"><span class="nav-text">2.2 场景</span></a></li><li class="nav-item nav-level-4"><a class="nav-link"><span class="nav-text">2.3 缓解方式</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link"><span class="nav-text">三、API3:2023 破损的对象属性级别授权（Broken Object Property Level Authorization）</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link"><span class="nav-text">3.1 定义</span></a></li><li class="nav-item nav-level-4"><a class="nav-link"><span class="nav-text">3.2 场景</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link"><span class="nav-text">四、API4:2023 无限制的资源消耗（Unrestricted Resource Consumption）【Dos】</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link"><span class="nav-text">4.1 定义</span></a></li><li class="nav-item nav-level-4"><a class="nav-link"><span class="nav-text">4.2 场景</span></a></li><li class="nav-item nav-level-4"><a class="nav-link"><span class="nav-text">4.3 缓解方式</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link"><span class="nav-text">五、API5:2023 破损的功能级别授权（Broken Function Level Authorization）</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link"><span class="nav-text">5.1 定义</span></a></li><li class="nav-item nav-level-4"><a class="nav-link"><span class="nav-text">5.2 场景</span></a></li><li class="nav-item nav-level-4"><a class="nav-link"><span class="nav-text">5.3 缓解方式</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link"><span class="nav-text">六、服务器端请求伪造（“SSRF”）</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link"><span class="nav-text">6.1 定义</span></a></li><li class="nav-item nav-level-4"><a class="nav-link"><span class="nav-text">6.2 场景</span></a></li><li class="nav-item nav-level-4"><a class="nav-link"><span class="nav-text">6.3 缓解措施</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link"><span class="nav-text">七、API7:2023 安全配置错误（Security Misconfigurations）</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link"><span class="nav-text">7.1 定义</span></a></li><li class="nav-item nav-level-4"><a class="nav-link"><span class="nav-text">7.2 场景</span></a></li><li class="nav-item nav-level-4"><a class="nav-link"><span class="nav-text">7.3 缓解方式</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link"><span class="nav-text">八、API8:2023 缺乏对自动化威胁的保护（Lack of Protection from Automated Threats）</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link"><span class="nav-text">8.1 定义</span></a></li><li class="nav-item nav-level-4"><a class="nav-link"><span class="nav-text">8.2 场景</span></a></li><li class="nav-item nav-level-4"><a class="nav-link"><span class="nav-text">8.3 缓解措施</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link"><span class="nav-text">九、API9:2023 不当的库存管理（Improper Inventory Management）</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link"><span class="nav-text">9.1 定义</span></a></li><li class="nav-item nav-level-4"><a class="nav-link"><span class="nav-text">9.2 场景</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link"><span class="nav-text">十、API10:2023 不安全的API消费</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link"><span class="nav-text">10.1 定义</span></a></li><li class="nav-item nav-level-4"><a class="nav-link"><span class="nav-text">10.2 场景</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link"><span class="nav-text">总结</span></a></li><li class="nav-item nav-level-3"><a class="nav-link"><span class="nav-text">参考文献</span></a></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="lzy"
      src="/images/cat_mac.jpg">
  <p class="site-author-name" itemprop="name">lzy</p>
  <div class="site-description" itemprop="description">相比到达的地方，同行的人更重要！</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">267</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">61</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">77</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/PowerLZY" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;PowerLZY" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:3289218653@qq.com" title="E-Mail → mailto:3289218653@qq.com" rel="noopener me" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>
  <div class="cc-license animated" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/zh-CN" class="cc-opacity" rel="noopener" target="_blank"><img src="https://cdnjs.cloudflare.com/ajax/libs/creativecommons-vocabulary/2020.11.3/assets/license_badges/small/by_nc_sa.svg" alt="Creative Commons"></a>
  </div>

        </div>
      </div>
        <div class="back-to-top animated" role="button" aria-label="返回顶部">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://powerlzy.github.io/posts/4JR3RA/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/cat_mac.jpg">
      <meta itemprop="name" content="lzy">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="PowerLZY's Blog">
      <meta itemprop="description" content="相比到达的地方，同行的人更重要！">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="流量反作弊（8）【Draft】OWASP-API安全top 10 2023年变化解读 | PowerLZY's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          流量反作弊（8）【Draft】OWASP-API安全top 10 2023年变化解读
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-05-04 15:46:58" itemprop="dateCreated datePublished" datetime="2023-05-04T15:46:58+08:00">2023-05-04</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2023-07-06 22:51:44" itemprop="dateModified" datetime="2023-07-06T22:51:44+08:00">2023-07-06</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E3%80%90draft%E3%80%91%E5%BA%94%E7%94%A8/" itemprop="url" rel="index"><span itemprop="name">【draft】应用</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E3%80%90draft%E3%80%91%E5%BA%94%E7%94%A8/%E5%B7%A5%E4%B8%9A%E8%90%BD%E5%9C%B0/" itemprop="url" rel="index"><span itemprop="name">工业落地</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E3%80%90draft%E3%80%91%E5%BA%94%E7%94%A8/%E5%B7%A5%E4%B8%9A%E8%90%BD%E5%9C%B0/%E4%B8%9A%E5%8A%A1%E5%AE%89%E5%85%A8/" itemprop="url" rel="index"><span itemprop="name">业务安全</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E3%80%90draft%E3%80%91%E5%BA%94%E7%94%A8/%E5%B7%A5%E4%B8%9A%E8%90%BD%E5%9C%B0/%E4%B8%9A%E5%8A%A1%E5%AE%89%E5%85%A8/API%E5%AE%89%E5%85%A8/" itemprop="url" rel="index"><span itemprop="name">API安全</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">阅读次数：</span>
      <span id="busuanzi_value_page_pv"></span>
    </span>
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>11k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>20 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <h2><span id="todoowasp-api安全-top-10-2023变化解读"><font color="red">【TODO】OWASP API安全 top 10 2023变化解读</font></span></h2>
<blockquote>
<p>问题定义，【问题危害】，变化比较（变化原因），场景分析，【案例分析】, 缓解措施</p>
</blockquote>
<table>
<thead>
<tr>
<th>2019</th>
<th>2023</th>
<th>变化</th>
</tr>
</thead>
<tbody>
<tr>
<td>API1:2019 Broken Object Level Authorization</td>
<td>API1:2023 Broken Object Level Authorization</td>
<td>水平越权</td>
</tr>
<tr>
<td>API2:2019 Broken <strong>User</strong> Authentication</td>
<td>‍API2:2023 Broken Authentication</td>
<td>范围从”人“的认证，扩展到了”人+机“的认证</td>
</tr>
<tr>
<td><strong>API3:2019 Excessive Data Exposure</strong></td>
<td><font color="red">API3:2023 Broken Object Property Level Authorization</font></td>
<td>合并了API3（过度数据暴露）+API6（批量分配）</td>
</tr>
<tr>
<td>API4:2019 Lack of Resources &amp; Rate Limiting</td>
<td>‍API4:2023 Unrestricted Resource Consumption</td>
<td>应用层Dos，强调了后果（后端资源\云平台欠费）</td>
</tr>
<tr>
<td>API5:2019 Broken Function Level Authorization</td>
<td>API5:2023 Broken Function Level Authorization</td>
<td>垂直越权</td>
</tr>
<tr>
<td><strong>API6:2019 Mass Assignment</strong></td>
<td>‍<font color="red">API6:2023 Server-Side Request Forgery (SSRF)</font></td>
<td></td>
</tr>
<tr>
<td>API7:2019 Security Misconfiguration</td>
<td>API7:2023 Security Misconfigurations</td>
<td></td>
</tr>
<tr>
<td><strong>API8:2019 Injection</strong></td>
<td><font color="red">API8:2023 Lack of Protection from Automated Threats</font></td>
<td>业务风控/爬虫/Bot保护</td>
</tr>
<tr>
<td>API9:2019 Improper Assets Management</td>
<td>API9:2023 Improper Inventory Management</td>
<td>强调了”未下线的老版本API/临时调试API“风险暴露面</td>
</tr>
<tr>
<td><strong>API10:2019 Insufficient Logging &amp; Monitoring</strong></td>
<td><font color="red">API10:2023 Unsafe Consumption of APIs</font></td>
<td>供应链角度：开发人员信任第三方API而不继进行检验</td>
</tr>
</tbody>
</table>
<p><strong>伴随企业数字化程度的加深，API成为软件世界数据交互的“通用语言”，其数量迎来爆发式增长。同时，API的广泛应用也为运维可见性、安全性提出了新的挑战。针对API这种“易攻难守”的新兴资产的安全治理显得愈发重要。</strong></p>
<p>OWASP为强调API安全的重要性，在2019年首次提出了API Security Top 10。后随着安全产业实践加深，于2023年发布了API Security Top 10（候选版）的内容更新。<strong><font color="red">该更新内容进一步强调了API攻击场景与Web攻击的差异化，突出API权限管理、资产管理、业务风控及供应链问题。</font></strong></p>
<span id="more"></span>
<p><strong>主要变化如下图所示：</strong></p>
<p><img src="https://lzy-picture.oss-cn-beijing.aliyuncs.com/img/202305041838031.png" alt="img"></p>
<blockquote>
<p><font color="red">PPT绘制，变化分析</font></p>
</blockquote>
<ol>
<li><strong>针对身份认证漏洞</strong>，越来越多的服务提供商开始将身份认证范围从对人的认证变为对“人+机”的认证。这意味着除了对用户身份进行验证外，还需结合设备、环境等其他因素来进行身份认证。这种方式相比传统的单一身份认证方式更安全可靠，可以有效避免伪造、冒用等攻击手段。</li>
<li><strong>增加了“服务端请求伪造漏洞”内容</strong>，说明这是一种非常危险的安全漏洞，攻击者可以利用该漏洞窃取敏感信息、发起内网攻击、进行DoS攻击等，同时表明了在服务端请求处理过程中，输入验证与过滤的重要性。加强对SSRF漏洞的防范，可以有效提高应用程序的安全性。</li>
<li>随着人工智能、机器学习等技术的发展，<strong>自动化攻击手段也变得越来越普遍和复杂</strong>。自动化攻击可以通过机器学习算法、大数据分析、自动化工具等方式，快速、准确地扫描目标系统漏洞或发起攻击，对系统造成严重威胁。增加了“缺少对自动化威胁的防护”内容，说明在实际应用中，很多企业缺乏对自动化攻击的防护措施，存在一定的安全风险。而不安全的第三方API可能会导致系统遭受攻击，企业需要加强安全意识，选择可信赖的服务提供商，进行充分的安全测试和验证，限制API的权限并监控API的使用情况，可以保障系统的安全性。</li>
</ol>
<p>这些趋势变化说明了在信息化和数字化快速发展的时代，传统的身份验证方式已经无法满足日益增长的安全需求，需要采用更多元化、智能化的身份认证方式来提高系统、服务、数据的安全性。</p>
<h3><span id="owasp-api安全10大变化2023rc">OWASP API安全10大变化2023RC</span></h3>
<p>Open Web Application Security Project (<a target="_blank" rel="noopener" href="https://owasp.org/about/">OWASP</a>) 基金会通过由社区主导的开放源代码软件项目、全球数百个分会、数万名会员，以及通过举办地方和全球会议，致力于提高软件安全性。<strong>OWASP API安全项目旨在通过强调不安全API中的潜在风险，并说明如何减轻这些风险，为软件开发人员和安全评估人员提供价值。为了实现这一目标，OWASP API安全项目将创建并维护一份10大API安全风险文档，以及创建或评估API时最佳实践的文档门户。</strong></p>
<p>最近，OWASP API项目决定更新流行的API安全前十威胁地图。Salt Security团队一直积极参与该项目，是最初创建该列表的重要贡献者之一。我们继续深入参与思考过程、数据收集和更新方案的头脑风暴。</p>
<p>**截至本文撰写时，API安全前十2023的最终版本尚未正式发布。然而，一个初始的发布候选版本已经发布。**在这篇文章中，我们想分享一些这个新API安全前十地图背后的动机，并分享我们的观点以及一些数据，以支持这些决策。</p>
<h3><span id="一-api12023-破损的对象级别授权bola">一、API1:2023 破损的对象级别授权（BOLA）</span></h3>
<h4><span id="11-定义">1.1 定义</span></h4>
<p>BOLA攻击向量在映射【map】中保持着其尊重的第一名位置，并且理所当然。在API攻击中，BOLA攻击仍然是首选攻击向量。</p>
<p><strong>BOLA保持最高排名的主要原因是所有形式的API中复杂和多样的授权机制（或缺乏授权机制）</strong>。虽然一些API框架允许更好的授权控制，但其他框架则没有。在快速开发的环境中，监督每个授权问题和检查每个对象的访问权限以确保只有允许的用户可以访问它变得非常困难。</p>
<p>另一方面，由于授权是每个系统的核心，一旦错误实施，授权失败可能会产生灾难性的影响，就像我们最近发现的那个例子一样。<font color="red">研究人员在各种汽车制造商提供的在线服务中发现了几个BOLA漏洞。在这个例子中，攻击者可以利用BOLA漏洞接管任何法拉利车主的在线账户，并代表其执行任何操作。</font></p>
<blockquote>
<p>BOLA:</p>
</blockquote>
<h4><span id="12-场景">1.2 场景</span></h4>
<p><a target="_blank" rel="noopener" href="https://samcurry.net/web-hackers-vs-the-auto-industry/#:~:text=Full%20Account%20Takeover%20on%20Ferrari%20and%20Arbitrary%20Account%20Creation%20allows%20Attacker%20to%20Access%2C%20Modify%2C%20and%20Delete%20All%20Customer%20Information%20and%20Access%20Administrative%20CMS%20Functionality%20to%20Manage%20Ferrari%20Websites"><font color="blue">BOLA案例: Web Hackers vs. The Auto Industry: Critical Vulnerabilities in Ferrari, BMW, Rolls Royce, Porsche, and More</font></a></p>
<p>在线商店（商店）的电子商务平台提供了一个列表页面，其中包含其托管商店的收入图表。通过检查浏览器请求，攻击者可以识别用作这些图表数据源的API端点及其模式<code>/shops/&#123;shopName&#125;/revenue_data.json</code>。使用另一个API端点，攻击者可以获得所有托管店铺名称的列表。通过一个简单的脚本来操作列表中的名称，替换URL中的<code>&#123;shopName&#125;</code>，攻击者可以访问数千家电子商务商店的销售数据。</p>
<h4><span id="13-缓解方式">1.3 缓解方式</span></h4>
<ul>
<li><strong>实现适当的授权机制，该机制依赖于用户策略和层次结构。</strong></li>
<li><strong>在使用客户端输入访问数据库中的记录的每个函数中，使用授权机制检查登录的用户是否有权对记录执行请求的操作。</strong></li>
<li><strong>更喜欢使用随机和不可预测的值作为记录ID的GUID。</strong></li>
<li>编写测试以评估授权机制的漏洞。不要部署导致测试失败的更改。</li>
</ul>
<blockquote>
<p><font color="red">常见的授权机制？</font></p>
</blockquote>
<h3><span id="二-api22023-破损的身份验证broken-authentication">二、API2:2023 破损的身份验证（Broken Authentication）</span></h3>
<h4><span id="21-定义">2.1 定义</span></h4>
<p>紧随BOLA和授权问题之后的是身份验证问题，它们保持了第二高的攻击向量排名。</p>
<p>在身份验证情况下，相对于授权情况，有更多标准（和非标准）选项可用于执行该功能。由于身份验证流程的敏感性，该过程中的任何小问题可能会对安全性产生严重影响，而每种身份验证方法都引入了其自己的一系列可能问题，使得保护它们成为一项非常复杂的任务。</p>
<p>一个这样的例子可以在Salt Labs最近发布的研究中看到，在该研究中，booking.com的社交登录功能不当，可能导致攻击者接管该网站数百万用户中的任何一个账户。</p>
<h4><span id="22-场景">2.2 场景</span></h4>
<p><a target="_blank" rel="noopener" href="https://salt.security/blog/traveling-with-oauth-account-takeover-on-booking-com?">booking.com的社交登录功能不当</a></p>
<h4><span id="23-缓解方式">2.3 缓解方式</span></h4>
<h3><span id="三-api32023-破损的对象属性级别授权broken-object-property-level-authorization"><font color="red">三、API3:2023 破损的对象属性级别授权（Broken Object Property Level Authorization）</font></span></h3>
<h4><span id="31-定义">3.1 定义</span></h4>
<p>这个新类别处理对象属性级别授权，与对象级别授权（API-1）相对。</p>
<p><strong>这个新类别的主要思想是，即使一个特定的API可以实施足够的对象级别授权安全措施，它可能仍然不足够。通常，授权需要更加细粒度，并包括对象及其属性</strong>。很常见的情况是，API对象具有一个公共属性和一个私有属性，这些不同的访问级别也必须得到处理。</p>
<p>从更具体的角度来看，虽然这个类别是新的，但它将2019年的两个旧类别合并为一个。这些类别包括“过度数据暴露”和“大规模分配”，很好地符合这个新定义。</p>
<h4><span id="32-场景">3.2 场景</span></h4>
<p>Twitter报告的最近一起事件展示了这个类别对即使是最大的、经过良好审查的服务所构成的风险。在这种情况下，攻击者可以通过提供电子邮件地址或电话号码并检查返回的错误响应来枚举现有的Twitter用户。对于现有用户，一个特定的错误消息属性以确定的方式被改变，从而允许这个枚举过程的发生。</p>
<p><a target="_blank" rel="noopener" href="https://privacy.twitter.com/en/blog/2022/an-issue-affecting-some-anonymous-accounts">案例分析：影响推特上某些帐户和私人信息的事件</a></p>
<p><strong>场景一</strong></p>
<p>在基于短视频的社交网络中，有一些限制性内容需要进行过滤和审查。即使上传的视频被系统拦截了，用户还是可以通过以下API请求来修改视频的描述信息。</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">PUT /api/video/update_video</span><br><span class="line"><span class="punctuation">&#123;</span><span class="attr">&quot;description&quot;</span><span class="punctuation">:</span><span class="string">&quot;a funny video about cats&quot;</span><span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#123;</span><span class="attr">&quot;description&quot;</span><span class="punctuation">:</span><span class="string">&quot;a funny video about cats&quot;</span><span class="punctuation">,</span><span class="attr">&quot;blocked&quot;</span><span class="punctuation">:</span><span class="literal"><span class="keyword">false</span></span><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<p>这就意味着，如果用户上传不良内容的视频并通过修改描述信息的方式绕过系统审查。</p>
<h3><span id="四-api42023-无限制的资源消耗unrestricted-resource-consumptiondos">四、API4:2023 无限制的资源消耗（<strong>Unrestricted Resource Consumption</strong>）【Dos】</span></h3>
<h4><span id="41-定义">4.1 定义</span></h4>
<p>虽然类别名称可能有些变化，描述也有所改变，但该类别整体上保持不变。</p>
<p>**资源是任何API的心脏和灵魂，没有它们，API将仅仅是一个空壳。而且，虽然你不能没有资源，但与资源共存会带来安全风险。**资源的消耗可能会迅速导致许多种DoS场景，无论服务器是否处理巨大文件（从而消耗其CPU资源），过多的流量（消耗网络资源）或任何其他类型的资源消耗。</p>
<p>这些攻击的流行主要源于执行此类攻击通常非常简单，有时仅需将大文件上传到文件上传端点即可。另一方面，成功的攻击很快就能导致DoS情况，这可能正是攻击者想要实现的效果，无论是作为攻击本身还是为其他类型的攻击制造烟幕。</p>
<p>这种攻击的一个非常流行的例子是针对API的DDoS攻击。这些攻击通常非常嘈杂，因此经常引起公众的关注。<strong>最近的一个例子显示，由于此类攻击，波兰的关键税收门户对波兰公民不可用。</strong></p>
<h4><span id="42-场景">4.2 场景</span></h4>
<p><a target="_blank" rel="noopener" href="https://www.bloomberg.com/news/articles/2023-03-01/poland-points-finger-at-russia-over-ddos-attack-on-nation-s-key-tax-portal?leadSource=uverify%20wall">DOS案例：Poland Points Finger at Russia Over DDOS Attack on Nation’s Key Tax Portal</a></p>
<h4><span id="43-缓解方式">4.3 缓解方式</span></h4>
<h3><span id="五-api52023-破损的功能级别授权broken-function-level-authorization">五、API5:2023 破损的功能级别授权（Broken Function Level Authorization）</span></h3>
<h4><span id="51-定义">5.1 定义</span></h4>
<p>这个类别保持了它在2019年的排名，并且仍然是最受欢迎的API攻击方法之一。</p>
<p><strong>这个问题的来源可能会有所不同，可能是由于缺乏API的适当文档（这在所有API从业者中非常常见），也可能是由于使用CI/CD和类似方法的快速开发周期。</strong></p>
<p><font color="red">攻击发生在特定的API端点有一个相邻的端点使用不同的HTTP方法（REST），未经记录的突变（GraphQL），甚至是不同的编码。这些“隐藏”的端点具有特定的功能，通常不应该向公众公开。</font>如果这样的功能可以作为攻击的一部分被发现有用，攻击者可能会执行未知或非特权操作，以帮助他们的攻击。</p>
<p>这种情况的一个例子是Reddit漏洞，允许用户使用“隐藏”的PATCH端点绕过所有广告内容限制，而不需要Reddit的任何同意即可批准广告。</p>
<h4><span id="52-场景">5.2 场景</span></h4>
<p><a target="_blank" rel="noopener" href="https://infosecwriteups.com/why-this-simple-mistake-earned-a-5000-bug-bounty-from-reddit-d906cb46c60e">案例分析：Why this SIMPLE mistake earned a $5000 bug bounty from Reddit</a></p>
<h4><span id="53-缓解方式">5.3 缓解方式</span></h4>
<h3><span id="六-服务器端请求伪造ssrf"><font color="red">六、服务器端请求伪造（“SSRF”）</font></span></h3>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://github.com/OWASP/API-Security/blob/master/2023/en/src/0xa6-server-side-request-forgery.md">https://github.com/OWASP/API-Security/blob/master/2023/en/src/0xa6-server-side-request-forgery.md</a></p>
</blockquote>
<h4><span id="61-定义">6.1 定义</span></h4>
<p><strong>2023年新增的一个非常恰当的类别是服务器端请求伪造（“SSRF”）。</strong></p>
<p>当用户控制的URL通过API传递并被后端服务器接受和处理时，就会发生SSRF。如果后端服务器试图连接用户提供的URL，SSRF的门立即打开，环境的风险变得真实。</p>
<p>SSRF可能有许多不同的类型和风格。一些常见的情况可能包括：</p>
<ul>
<li><strong>后端服务器连接到外部攻击者控制的域，并在这样做的过程中可能会暴露内部凭据，这些凭据可以用于升级攻击。</strong></li>
<li><strong>后端服务器在各种TCP端口上连接到其回环接口，允许攻击者在后端服务器上执行端口扫描服务发现。</strong></li>
<li><strong>后端服务器连接到其他内部服务，否则攻击者无法访问，扩大了可用的攻击面，并为其他链接的攻击向量打开了大门。</strong></li>
</ul>
<h4><span id="62-场景">6.2 场景</span></h4>
<p>Salt Labs最近发布的研究突出了SSRF攻击中嵌入的风险。在这项研究中，Salt Lab的研究人员能够访问巨型乐高拥有的网站的内部网络资源，从而可能危及这个著名Web服务支持的整个外围防御机制。</p>
<p><a target="_blank" rel="noopener" href="https://salt.security/blog/missing-bricks-finding-security-holes-in-lego-apis?"><font color="blue">SSRF案例分析：缺失的积木：寻找乐高 API 中的安全漏洞</font></a></p>
<h5><span id="场景一">场景一：</span></h5>
<p>社交网络允许用户上传个人资料图片。用户可以选择从他们的机器上传图像文件，也可以提供图像的URL。选择第二个将触发以下API调用：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">POST /api/profile/upload_picture</span><br><span class="line"></span><br><span class="line">&#123;&quot;picture_url&quot;:&quot;http:///example.com/profile_pic.jpg&quot;&#125;</span><br></pre></td></tr></table></figure>
<p>攻击者可以发送恶意URL，并使用API端点在内部网络内启动端口扫描。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;&quot;picture_url&quot;:&quot;localhost:8080&quot;&#125;</span><br></pre></td></tr></table></figure>
<p>根据响应时间，攻击者可以判断端口是否打开。</p>
<h5><span id="场景二">场景二：</span></h5>
<p><strong>安全产品在检测到网络中的异常时会生成事件。一些团队更喜欢在更广泛、更通用的监控系统中审查事件，例如SIEM（安全信息和事件管理）。为此，该产品使用webhook提供与其他系统的集成。</strong></p>
<p>作为创建新webhook的一部分，将使用SIEM API的URL发送GraphQL变异。</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">POST /graphql</span><br><span class="line"></span><br><span class="line"><span class="punctuation">[</span></span><br><span class="line">  <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;variables&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;query&quot;</span><span class="punctuation">:</span> <span class="string">&quot;mutation &#123;</span></span><br><span class="line"><span class="string">      createNotificationChannel(input: &#123;</span></span><br><span class="line"><span class="string">        channelName: \&quot;ch_piney\&quot;,</span></span><br><span class="line"><span class="string">        notificationChannelConfig: &#123;</span></span><br><span class="line"><span class="string">          customWebhookChannelConfigs: [</span></span><br><span class="line"><span class="string">            &#123;</span></span><br><span class="line"><span class="string">              url: \&quot;http://www.siem-system.com/create_new_event\&quot;,</span></span><br><span class="line"><span class="string">              send_test_req: true</span></span><br><span class="line"><span class="string">            &#125;</span></span><br><span class="line"><span class="string">          ]</span></span><br><span class="line"><span class="string">    	  &#125;</span></span><br><span class="line"><span class="string">  	  &#125;)&#123;</span></span><br><span class="line"><span class="string">    	channelId</span></span><br><span class="line"><span class="string">  	&#125;</span></span><br><span class="line"><span class="string">	&#125;&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">]</span></span><br></pre></td></tr></table></figure>
<p>在创建过程中，API后端向提供的webhook URL发送测试请求，并向用户显示响应。</p>
<p>攻击者可以利用此流，使API请求成为敏感资源，例如公开凭据的内部云元数据服务：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">POST /graphql</span><br><span class="line"></span><br><span class="line"><span class="punctuation">[</span></span><br><span class="line">  <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;variables&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;query&quot;</span><span class="punctuation">:</span> <span class="string">&quot;mutation &#123;</span></span><br><span class="line"><span class="string">      createNotificationChannel(input: &#123;</span></span><br><span class="line"><span class="string">        channelName: \&quot;ch_piney\&quot;,</span></span><br><span class="line"><span class="string">        notificationChannelConfig: &#123;</span></span><br><span class="line"><span class="string">          customWebhookChannelConfigs: [</span></span><br><span class="line"><span class="string">            &#123;</span></span><br><span class="line"><span class="string">              url: \&quot;http://169.254.169.254/latest/meta-data/iam/security-credentials/ec2-default-ssm\&quot;,</span></span><br><span class="line"><span class="string">              send_test_req: true</span></span><br><span class="line"><span class="string">            &#125;</span></span><br><span class="line"><span class="string">          ]</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">      &#125;) &#123;</span></span><br><span class="line"><span class="string">        channelId</span></span><br><span class="line"><span class="string">      &#125;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">]</span></span><br></pre></td></tr></table></figure>
<p>由于应用程序显示来自测试请求的响应，因此攻击者可以查看云环境的凭据。</p>
<h4><span id="63-缓解措施">6.3 缓解措施</span></h4>
<ul>
<li>隔离网络中的资源获取机制：通常这些功能旨在检索远程资源，而不是内部资源。</li>
<li>只要可能，请使用的允许列表
<ul>
<li>远程源用户应从（例如Google Drive、Gravatar等）下载资源</li>
<li>URL方案和端口</li>
<li>给定功能的可接受媒体类型</li>
</ul>
</li>
<li>禁用HTTP重定向。</li>
<li>使用经过良好测试和维护的URL解析器来避免URL解析不一致所引起的问题。</li>
<li>验证并清除所有客户端提供的输入数据。</li>
<li>不要向客户端发送原始响应。</li>
</ul>
<h3><span id="七-api72023-安全配置错误security-misconfigurations">七、API7:2023 安全配置错误（Security Misconfigurations）</span></h3>
<h4><span id="71-定义">7.1 定义</span></h4>
<p>安全配置错误保持其排名，成为最受欢迎的API攻击向量之一。</p>
<p>当然，安全配置错误是一个更广泛的类别，适用于许多其他主题，而不仅仅是API。然而，由于API通常是设计在底层基础架构之上的，它可能是一个简单的HTTP服务器或一个【闪亮】的API网关。这些基础设施组件必须进行适当的配置。在这个配置中的任何错误可能会威胁整个API及其所有端点的安全。</p>
<p><strong>一个非常简单但常见的情况是API缺乏适当的SSL定义，导致所有请求都通过HTTP而不是HTTPS发送，这将允许中间人攻击向量的发生。</strong></p>
<p>Wiz安全研究团队发现的最近漏洞展示了这些安全问题可以有多么严重。在攻击链的某个点上，研究人员可以访问内部IBM云k8s API，这使他们能够进一步升级他们的攻击，最终读取和修改存储在其租户的PostgreSQL数据库中的数据。</p>
<h4><span id="72-场景">7.2 场景</span></h4>
<p><a target="_blank" rel="noopener" href="https://www.wiz.io/blog/hells-keychain-supply-chain-attack-in-ibm-cloud-databases-for-postgresql">案例分析：Hell’s Keychain：IBM Cloud Databases for PostgreSQL 中的供应链漏洞允许潜在的未经授权的数据库访问</a></p>
<h4><span id="73-缓解方式">7.3 缓解方式</span></h4>
<h3><span id="八-api82023-缺乏对自动化威胁的保护lack-of-protection-from-automated-threats"><font color="red">八、API8:2023 缺乏对自动化威胁的保护（Lack of Protection from Automated Threats）</font></span></h3>
<table>
<thead>
<tr>
<th>Attack vectors</th>
<th>Security Weakness</th>
<th>Impacts</th>
</tr>
</thead>
<tbody>
<tr>
<td>可利用性 3</td>
<td>普及率3：可检测性1</td>
<td>技术1：特定于业务</td>
</tr>
<tr>
<td>利用通常包括理解API的业务模型，查找敏感的业务流，并自动访问这些流，从而对业务造成危害.</td>
<td>当被分解时，每个攻击请求都代表一个完全合法的请求，不能被识别为攻击。只有在查看与服务/应用程序业务逻辑相关的请求总数时，才能识别攻击。</td>
<td>一般来说，预计不会产生技术影响。剥削可能会以不同的方式损害业务，例如：1。阻止合法用户购买产品；2.导致游戏内部经济的通货膨胀；3.允许攻击者发送过多的消息/评论，并容易传播假新闻。</td>
</tr>
</tbody>
</table>
<h4><span id="81-定义">8.1 定义</span></h4>
<p>这个新类别聚焦于一种新型常见的API攻击类型，主要解决业务逻辑流被滥用以允许恶意行为的场景。</p>
<p><strong>尽管这些攻击是常见的，但它们极难检测和防御。在这个攻击类别中，攻击本身是一组请求的总和的衍生物，其中每个单独的请求是完全合法的。只有在特定的业务逻辑上下文中查看API请求的总和时，攻击才会显露出来。</strong></p>
<p>这个类别出现在所有业务部门中，每次攻击对于每个环境和每个业务逻辑都是完全独特的。检测这些攻击只能通过查看整体用户/请求流程来进行，逐个检查每个请求将永远不会揭示攻击。</p>
<h4><span id="82-场景">8.2 场景</span></h4>
<p>最近发表的研究显示，研究人员如何通过执行自动化攻击来滥用URL缩短服务及其业务逻辑。通过执行这次攻击，研究人员可以接管使用URL缩短器服务的公司的帐户。</p>
<p><a target="_blank" rel="noopener" href="https://infosecwriteups.com/abusing-url-shortners-for-fun-and-profit-c83c67713916">案例分析：Abusing URL Shortners for fun and profit</a></p>
<h5><span id="场景一">场景一：</span></h5>
<p>一家科技公司宣布，他们将在感恩节发布一款新的游戏机。该产品的需求量很大，库存有限。攻击者，自动威胁网络的操作员，编写代码自动购买新产品并完成交易。</p>
<p>在发布当天，攻击者运行分布在不同IP地址和位置的代码。API没有实现适当的保护，允许攻击者在其他合法用户之前购买大部分股票。</p>
<p>后来，攻击者在另一个平台上以高得多的价格出售该产品。</p>
<h5><span id="场景二">场景二：</span></h5>
<p><strong>拼车应用程序提供了一个推荐计划，用户可以邀请他们的朋友，并为每个加入该应用程序的朋友获得积分。这笔贷款以后可以用作现金预订乘车服务。</strong></p>
<p>攻击者通过编写脚本来自动化注册过程，并让每个新用户向攻击者的钱包添加信用，从而利用此流。攻击者稍后可以享受免费乘车服务，或者将信用额度过高的账户出售以换取现金。</p>
<h4><span id="83-缓解措施"><font color="red">8.3 缓解措施</font></span></h4>
<p><strong>缓解规划应分两层（业务+工程）进行：</strong></p>
<ul>
<li><strong>业务</strong>-识别如果过度使用可能会损害业务的业务流。</li>
<li><strong>工程</strong>-选择正确的保护机制来降低业务风险。有些保护机制更为简单，而另一些则更难实施。以下方法用于减缓自动威胁的速度：
<ul>
<li><strong>设备指纹识别</strong>：拒绝向意外的客户端设备（如无头浏览器）提供服务往往会使威胁行为者使用更复杂的解决方案，从而使他们的成本更高</li>
<li><strong>人体检测</strong>：使用captcha或更先进的生物识别解决方案（例如打字模式）</li>
<li><strong>非人模式</strong>：分析用户流以检测非人模式（例如，用户在不到一秒钟的时间内访问了“添加到购物车”和“完成购买”功能）</li>
<li>考虑阻止Tor出口节点和已知代理的IP地址；</li>
</ul>
</li>
<li>安全并限制对机器直接使用的API（如开发人员和B2B API）的访问。它们往往很容易成为攻击者的目标，因为它们通常无法实现所有所需的保护机制。a</li>
</ul>
<h3><span id="九-api92023-不当的库存管理improper-inventory-management">九、API9:2023 不当的库存管理（Improper Inventory Management）</span></h3>
<h4><span id="91-定义">9.1 定义</span></h4>
<p><strong>随着越来越多的公司暴露出许多API，以及频繁发布新的API端点，组织、监视、发现和获得更多对发布的API的可见性的挑战成为一个非常大的问题，许多组织发现很难适当地处理它。</strong></p>
<p>与此类别相关的一些非常常见的攻击场景将是攻击者可以找到一个“弱”端点或API并滥用它的情况。弱点的例子包括错误地向公众公开的测试或开发API，这些API可能没有包括在生产API中的所有安全措施。</p>
<h4><span id="92-场景">9.2 场景</span></h4>
<p>Optus数据泄露是这个类别的一个完美例子，澳大利亚第二大电信公司Optus因一个“被遗忘”的API向公众暴露了超过1120万个客户记录，其中包含数十个PII信息。公司已经拨出了1.4亿澳元来支付此次泄露的成本。</p>
<p><a target="_blank" rel="noopener" href="https://securityboulevard.com/2022/10/optus-data-breach-why-vulnerable-apis-are-to-blame/">案例分析：Optus Data Breach – Why Vulnerable APIs are to Blame</a></p>
<h3><span id="十-api102023-不安全的api消费"><font color="red">十、API10:2023 不安全的API消费</font></span></h3>
<h4><span id="101-定义">10.1 定义</span></h4>
<p>新的不安全消费类别包含两个常见的API问题。其中一个问题是解决API数据本身的消费。这个类别不是新的，其中大部分已经包含在OWASP API-8 2019（注入）部分中，可以通过API执行许多类型的基于注入的攻击。</p>
<p>**这个新的2023类别将这种类型的攻击扩大到包括不明确与注入相关的攻击，例如反序列化问题、某些类型的脱节攻击等。**所有这些攻击的共同根源是后端服务在接受通过API传递的用户控制输入时过于宽容，有时甚至盲目地使用它们而没有应用任何适当的验证。</p>
<p><font color="red">也许最好、最近、最相关的例子是臭名昭著的Log4Shell攻击，这场攻击引起了整个互联网的严重震荡，允许用户在几乎每个使用非常流行的Log4j日志库的Web服务上运行任意代码，使用简单执行的JNDI注入技术。</font></p>
<p>第二个问题密切相关，涉及到另一种攻击，滥用了几乎每个现代系统设计中的一个薄弱环节——集成。集成可以包括任何嵌入到API实现或其支持的后端服务中的第三方服务或功能。</p>
<p>第三方通常编写集成，其中包含大量的代码库，往往非常复杂，很难理解代码的内部运作方式。然而，将它们应用到您自己的服务通常只需要几个点击或几行代码。</p>
<p>可能会出现非常高风险的情况，其中服务包含大量未经验证的代码——从安全角度来看未经验证的代码。其中一些或全部直接与核心服务逻辑交互。这种风险是一个臭名昭著的攻击面，是攻击者在寻找漏洞时的首选之一。</p>
<h4><span id="102-场景">10.2 场景</span></h4>
<p><strong>虽然不是专属于这个类别，但基于API的供应链攻击是这个类别危险的一个很好的例子</strong>。在这项最近的研究中，安全研究人员发现通过攻击第三方WordPress和Magento插件的妥协执行的恶意活动，影响了选择使用这个第三方集成而没有进行适当安全验证的任何实现。</p>
<h3><span id="总结">总结</span></h3>
<p>从以上最新的API Security Top 10（候选版），可以看到，现在API安全和传统的Web安全有很大区别**，一方面需要在设计和开发阶段，对API的安全性进行良好的构建和设计；另一方面还需要在进入运维阶段后，针对API进行专项型的防护，根据API的特点构建全生命周期的防护体系，从而更好地应对各类风险，做到未雨绸缪、防患于未然。**</p>
<h3><span id="参考文献">参考文献</span></h3>
<p>我们鼓励整个安全社区进一步探索新的发布候选版本——这是您分享想法、评论甚至反对该项目的机会。</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/OWASP/API-Security">https://github.com/OWASP/API-Security</a></li>
<li><a target="_blank" rel="noopener" href="https://owasp.org/www-project-api-security/">https://owasp.org/www-project-api-security/</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/OWASP/API-Security/tree/master/2019/en/src">https://github.com/OWASP/API-Security/tree/master/2019/en/src</a></li>
<li><strong><font color="blue">OWASP API 安全性 Top 10 2023RC 的主要变化</font></strong>：<a target="_blank" rel="noopener" href="https://salt.security/blog/top-changes-in-the-owasp-api-security-top-10-2023rc">https://salt.security/blog/top-changes-in-the-owasp-api-security-top-10-2023rc</a>?</li>
<li><font color="blue"><strong>SSRF（Server-Side Request Forgery）</strong></font>：<a target="_blank" rel="noopener" href="https://owasp.org/Top10/A10_2021-Server-Side_Request_Forgery_%28SSRF%29/">https://owasp.org/Top10/A10_2021-Server-Side_Request_Forgery_(SSRF)/</a></li>
<li><strong><font color="blue">Azure：使用 API 管理缓解 OWASP API 安全性十大威胁的建议：<a target="_blank" rel="noopener" href="https://learn.microsoft.com/zh-cn/azure/api-management/mitigate-owasp-api-threats">https://learn.microsoft.com/zh-cn/azure/api-management/mitigate-owasp-api-threats</a></font></strong></li>
<li>星阑科技：OWASP API Security Top 10 (2023-RC更新)：<a target="_blank" rel="noopener" href="https://www.freebuf.com/articles/neopoints/365201.html">https://www.freebuf.com/articles/neopoints/365201.html</a></li>
<li><a target="_blank" rel="noopener" href="https://www.neosec.com/blog/neosec-covers-every-owasp-api-top-ten-vulnerability">Neosec 涵盖每个 OWASP API 前 10 大漏洞</a></li>
<li>BOLA 攻击剖析——第 1 部分：<a target="_blank" rel="noopener" href="https://www.neosec.com/blog/anatomy-of-a-bola-attack-part-1">https://www.neosec.com/blog/anatomy-of-a-bola-attack-part-1</a></li>
</ul>

    </div>

    
    
    

    <footer class="post-footer">
          

<div class="post-copyright">
<ul>
  <li class="post-copyright-author">
      <strong>本文作者： </strong>lzy
  </li>
  <li class="post-copyright-link">
      <strong>本文链接：</strong>
      <a href="https://powerlzy.github.io/posts/4JR3RA/" title="流量反作弊（8）【Draft】OWASP-API安全top 10 2023年变化解读">https://powerlzy.github.io/posts/4JR3RA/</a>
  </li>
  <li class="post-copyright-license">
      <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/zh-CN" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！
  </li>
</ul>
</div>

          <div class="post-tags">
              <a href="/tags/%E5%B7%A5%E4%B8%9A%E8%90%BD%E5%9C%B0/" rel="tag"># 工业落地</a>
              <a href="/tags/%E4%B8%9A%E5%8A%A1%E5%AE%89%E5%85%A8/" rel="tag"># 业务安全</a>
              <a href="/tags/API%E5%AE%89%E5%85%A8/" rel="tag"># API安全</a>
              <a href="/tags/OWASP/" rel="tag"># OWASP</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/posts/22PANQ7/" rel="prev" title="流量反作弊（7）Salt Security-What‘s the of use-cases Salt Surity?">
                  <i class="fa fa-chevron-left"></i> 流量反作弊（7）Salt Security-What‘s the of use-cases Salt Surity?
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/posts/2C9003N/" rel="next" title="账号安全（2）【TODO】Uncovering Large Groups of Active Malicious Accounts in Online Social Networks">
                  账号安全（2）【TODO】Uncovering Large Groups of Active Malicious Accounts in Online Social Networks <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">lzy</span>
</div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>

<!--
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/pisces/" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动
  </div>-->
<!-- 网站运行时间的设置 -->
<span id="timeDate">载入天数...</span>
<span id="times">载入时分秒...</span>
<script>
    var now = new Date();
    function createtime() {
        var grt= new Date("03/01/2023 10:00:00"); //此处修改你的建站时间或者网站上线时间
        now.setTime(now.getTime()+250);
        days = (now - grt ) / 1000 / 60 / 60 / 24; dnum = Math.floor(days);
        hours = (now - grt ) / 1000 / 60 / 60 - (24 * dnum); hnum = Math.floor(hours);
        if(String(hnum).length ==1 ){hnum = "0" + hnum;} minutes = (now - grt ) / 1000 /60 - (24 * 60 * dnum) - (60 * hnum);
        mnum = Math.floor(minutes); if(String(mnum).length ==1 ){mnum = "0" + mnum;}
        seconds = (now - grt ) / 1000 - (24 * 60 * 60 * dnum) - (60 * 60 * hnum) - (60 * mnum);
        snum = Math.round(seconds); if(String(snum).length ==1 ){snum = "0" + snum;}
        document.getElementById("timeDate").innerHTML = "本站已安全运行 "+dnum+" 天 ";
        document.getElementById("times").innerHTML = hnum + " 小时 " + mnum + " 分 " + snum + " 秒.";
    }
setInterval("createtime()",250);
</script>

    </div>
  </footer>

  

  <a href="https://github.com/PowerLZY" class="github-corner" title="在 GitHub 上关注我" aria-label="在 GitHub 上关注我" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>


  <script class="next-config" data-name="mermaid" type="application/json">{"enable":true,"theme":{"light":"default","dark":"dark"},"js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mermaid/9.4.3/mermaid.min.js","integrity":"sha256-e0o3JYsdjqKajf9eOe22FhioYSz9WofRY4dLKo3F6do="}}</script>
  <script src="/js/third-party/tags/mermaid.js"></script>


  <script src="/js/third-party/pace.js"></script>

  
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




  

  <script class="next-config" data-name="enableMath" type="application/json">true</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"all","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>




        <script src="//cdn.jsdelivr.net/npm/js-base64/base64.min.js"></script>
        <script>
        const hasAttr = (e,a) => a.some(_=> e.attr(_)!==undefined);
        $('a').each(function() {
          const $this = $(this);
          if(hasAttr($this,["data-fancybox","ignore-external-link"])) return;
          const href = $this.attr('href');
          if (href && href.match('^((http|https|thunder|qqdl|ed2k|Flashget|qbrowser|ftp|rtsp|mms)://)')) {
            const strs = href.split('/');
            if (strs.length >= 3) {
                const host = strs[2];
                if (host !== 'powerlzy.github.io' || window.location.host) {
                    $this.attr('href', '/go.html?u='+Base64.encode(href)+'').attr('rel', 'external nofollow noopener noreferrer');
                    if (true) {
                        $this.attr('target', '_blank');
                    }
                }
            }
          }
        });
        </script></body>
</html>
